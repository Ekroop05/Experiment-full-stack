<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Simple Drawing Tool</title>

<style>
body {
    font-family: Arial, sans-serif;
    background: #f4f4f4;
    text-align: center;
    padding: 20px;
}

.toolbar {
    margin-bottom: 10px;
}

button {
    padding: 6px 12px;
    margin: 2px;
    cursor: pointer;
}

button.active {
    background: #007bff;
    color: white;
}

.canvas-box {
    width: 700px;
    height: 400px;
    margin: auto;
    background: white;
    border: 2px solid #999;
}

svg {
    width: 100%;
    height: 100%;
    cursor: crosshair;
}
</style>
</head>

<body>

<h3>Drawing Tool</h3>

<div class="toolbar">
    <button onclick="setTool('brush')" id="brush" class="active">Brush</button>
    <button onclick="setTool('rect')" id="rect">Rect</button>
    <button onclick="setTool('circle')" id="circle">Circle</button>
    <button onclick="setTool('line')" id="line">Line</button>
    <input type="color" id="color" value="#000000">
    <button onclick="undo()">Undo</button>
    <button onclick="clearCanvas()">Clear</button>
</div>

<div class="canvas-box">
    <svg id="svg"></svg>
</div>

<script>
const svg = document.getElementById("svg");
let tool = "brush", drawing = false;
let startX, startY, shape, points = [];

// Change tool
function setTool(t) {
    tool = t;
    document.querySelectorAll("button").forEach(b => b.classList.remove("active"));
    document.getElementById(t).classList.add("active");
}

function pos(e) {
    const r = svg.getBoundingClientRect();
    return { x: e.clientX - r.left, y: e.clientY - r.top };
}

svg.onmousedown = e => {
    drawing = true;
    const p = pos(e);
    startX = p.x;
    startY = p.y;
    const color = document.getElementById("color").value;

    if (tool === "brush") {
        shape = document.createElementNS("http://www.w3.org/2000/svg", "polyline");
        points = [`${startX},${startY}`];
        shape.setAttribute("points", points.join(" "));
    } else {
        shape = document.createElementNS("http://www.w3.org/2000/svg", tool);
    }

    shape.setAttribute("fill", "none");
    shape.setAttribute("stroke", color);
    shape.setAttribute("stroke-width", 3);
    svg.appendChild(shape);
};


svg.onmousemove = e => {
    if (!drawing) return;
    const p = pos(e);

    if (tool === "brush") {
        points.push(`${p.x},${p.y}`);
        shape.setAttribute("points", points.join(" "));
    }
    else if (tool === "rect") {
        shape.setAttribute("x", Math.min(startX, p.x));
        shape.setAttribute("y", Math.min(startY, p.y));
        shape.setAttribute("width", Math.abs(p.x - startX));
        shape.setAttribute("height", Math.abs(p.y - startY));
    }
    else if (tool === "circle") {
        const r = Math.hypot(p.x - startX, p.y - startY);
        shape.setAttribute("cx", startX);
        shape.setAttribute("cy", startY);
        shape.setAttribute("r", r);
    }
    else if (tool === "line") {
        shape.setAttribute("x1", startX);
        shape.setAttribute("y1", startY);
        shape.setAttribute("x2", p.x);
        shape.setAttribute("y2", p.y);
    }
};


svg.onmouseup = () => drawing = false;
svg.onmouseleave = () => drawing = false;


function undo() {
    if (svg.lastChild) svg.removeChild(svg.lastChild);
}


function clearCanvas() {
    svg.innerHTML = "";
}
</script>

</body>
</html>
